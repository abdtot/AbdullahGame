<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6c5ce7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="لعبة ذكاء مثيرة - أبطال كيد الاعداء">
    <meta name="keywords" content="لعبة, ألغاز, ذكاء, بطاقات, تحديات">
    <meta name="author" content="أبطال كيد الاعداء">
    <title>أبطال كيد الاعداء - لعبة الذكاء المثيرة</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="أبطال كيد الاعداء - لعبة الذكاء المثيرة">
    <meta name="twitter:description" content="لعبة ذكاء مثيرة مع تحديات ومراحل مختلفة">
    <meta name="twitter:image" content="https://yourdomain.com/images/og-image.jpg">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="أبطال كيد الاعداء - لعبة الذكاء المثيرة">
    <meta property="og:description" content="لعبة ذكاء مثيرة مع تحديات ومراحل مختلفة">
    <meta property="og:image" content="https://yourdomain.com/images/og-image.jpg">
    <meta property="og:url" content="https://yourdomain.com">
    <meta property="og:locale" content="ar_SA">
    
    <!-- PWA -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="أبطال البطاقات">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="profile.css">
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="profile-responsive.css">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>
    <!-- شاشة التحميل -->
    <div class="loading-overlay" id="loading-screen" role="status" aria-live="polite">
        <div class="loading-spinner" aria-hidden="true"></div>
        <div class="loading-text" id="loading-text">جاري تحضير المغامرة...</div>
        <div class="visually-hidden">جاري تحميل اللعبة، الرجاء الانتظار</div>
    </div>

    <!-- شخصية المرشد -->
    <div class="mascot" id="mascot" role="button" aria-label="فتح نافذة مساعد اللعبة" tabindex="0">
        <i class="fas fa-robot" aria-hidden="true"></i>
        <div class="mascot-dialog" id="mascot-dialog" role="dialog" aria-labelledby="mascot-message" aria-hidden="true">
            <p id="mascot-message">مرحباً! أنا مساعدك في هذه المغامرة. انقر عليّ للحصول على المساعدة!</p>
            <button class="btn btn-small" id="mascot-close" aria-label="إغلاق نافذة المساعد">حسناً</button>
        </div>
    </div>

    <!-- زر التمرير للأعلى -->
    <button class="scroll-to-top" id="scroll-to-top" aria-label="التمرير إلى الأعلى">
        <i class="fas fa-chevron-up" aria-hidden="true"></i>
    </button>

    <!-- زر العودة -->
    <button class="back-button" id="back-button" aria-label="العودة للصفحة السابقة">
        <i class="fas fa-arrow-right"></i>
    </button>

    <!-- حاوية التطبيق الرئيسية -->
    <div class="app-container" role="main">
        <div class="content">
            <div class="container">
                <!-- شاشة المراحل مع الخريطة -->
                <section id="stages-screen" class="screen active" role="region" aria-labelledby="stages-title">
                    <header class="glass-effect" role="banner">
                        <div class="header-top">
                            <button class="btn-menu" id="menu-toggle" aria-label="فتح القائمة">
                                <i class="fas fa-bars"></i>
                            </button>
                            <div class="user-info">
                                <span class="user-name" id="user-name-display">المستخدم</span>
                                <div class="user-level">
                                    <i class="fas fa-trophy"></i>
                                    <span>المستوى 1</span>
                                </div>
                            </div>
                            <div class="notification-badge" id="notification-badge">
                                <i class="fas fa-bell"></i>
                                <span class="notification-count">3</span>
                            </div>
                        </div>
                        
                        <h1 id="stages-title">
                            <i class="fas fa-dragon" aria-hidden="true"></i>
                            أبطال البطاقات
                            <i class="fas fa-dragon" aria-hidden="true"></i>
                        </h1>
                        <div class="total-points glass-effect-light">
                            <i class="fas fa-coins" aria-hidden="true"></i>
                            <span id="total-points">0</span> نقطة
                        </div>
                        <div class="progress-bar">
                            <div class="progress" id="total-progress" style="width: 0%" 
                                 role="progressbar" 
                                 aria-valuenow="0" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                <span class="sr-only">0% من التقدم الكلي</span>
                            </div>
                        </div>
                    </header>
                    
                    <!-- القائمة الجانبية -->
                    <div class="side-menu" id="side-menu">
                        <div class="menu-header">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <h3 id="menu-user-name">المستخدم</h3>
                            <button class="menu-close" id="menu-close" aria-label="إغلاق القائمة">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="menu-items">
                            <a href="#" class="menu-item" data-target="stages-screen">
                                <i class="fas fa-home"></i>
                                <span>الرئيسية</span>
                            </a>
                            <a href="#" class="menu-item" data-target="profile-screen">
                                <i class="fas fa-user"></i>
                                <span>الملف الشخصي</span>
                            </a>
                            <a href="#" class="menu-item" data-target="achievements-screen">
                                <i class="fas fa-trophy"></i>
                                <span>الإنجازات</span>
                            </a>
                            <a href="#" class="menu-item" data-target="leaderboard-screen">
                                <i class="fas fa-ranking-star"></i>
                                <span>لوحة المتصدرين</span>
                            </a>
                            <a href="#" class="menu-item" data-target="shop-screen">
                                <i class="fas fa-shopping-cart"></i>
                                <span>المتجر</span>
                            </a>
                            <a href="#" class="menu-item" data-target="settings-screen">
                                <i class="fas fa-cog"></i>
                                <span>الإعدادات</span>
                            </a>
                            <a href="#" class="menu-item" data-target="help-screen">
                                <i class="fas fa-question-circle"></i>
                                <span>المساعدة</span>
                            </a>
                            <a href="#" class="menu-item" id="logout-btn">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>تسجيل الخروج</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="stages-map" id="stages-map" role="region" aria-label="خريطة المراحل">
                        <h2 class="sr-only">خريطة المراحل</h2>
                        <!-- سيتم إضافة نقاط المراحل ديناميكياً -->
                    </div>
                    
                    <div class="quick-actions glass-effect">
                        <div class="action-item" data-action="daily-challenge">
                            <i class="fas fa-calendar-day"></i>
                            <span>التحدي اليومي</span>
                        </div>
                        <div class="action-item" data-action="special-events">
                            <i class="fas fa-gift"></i>
                            <span>الفعاليات الخاصة</span>
                        </div>
                        <div class="action-item" data-action="quick-play">
                            <i class="fas fa-play-circle"></i>
                            <span>لعب سريع</span>
                        </div>
                    </div>
                    
                    <div class="instructions glass-effect">
                        <h3>
                            <i class="fas fa-info-circle"></i> تعليمات اللعبة
                        </h3>
                        <div class="instructions-grid">
                            <div class="instruction-item glass-effect-light">
                                <i class="fas fa-map"></i>
                                <p>اختر المرحلة من الخريطة لبدء التحدي</p>
                            </div>
                            <div class="instruction-item glass-effect-light">
                                <i class="fas fa-puzzle-piece"></i>
                                <p>حل الألغاز الثقافية لربح نقاط إضافية</p>
                            </div>
                            <div class="instruction-item glass-effect-light">
                                <i class="fas fa-lightbulb"></i>
                                <p>استخدم التلميحات بحكمة لمساعدتك</p>
                            </div>
                            <div class="instruction-item glass-effect-light">
                                <i class="fas fa-trophy"></i>
                                <p>اكسب إنجازات خاصة بتقدمك في اللعبة</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- شاشة المستويات -->
                <section id="levels-screen" class="screen" role="region" aria-labelledby="levels-title">
                    <header class="glass-effect" role="banner">
                        <div class="header-top">
                            <button class="btn-back" id="back-from-levels-btn" aria-label="العودة إلى الخريطة">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <h1 id="levels-title">
                                <span id="stage-title">المرحلة 1</span>
                            </h1>
                            <div class="stage-info">
                                <i class="fas fa-layer-group"></i>
                                <span id="stage-levels-count">0 مستوى</span>
                            </div>
                        </div>
                        <div class="total-points glass-effect-light">
                            <i class="fas fa-coins" aria-hidden="true"></i>
                            <span id="stage-points">0</span> نقطة
                        </div>
                        <div class="progress-bar">
                            <div class="progress" id="stage-progress" style="width: 0%"
                                 role="progressbar" 
                                 aria-valuenow="0" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                <span class="sr-only">0% من تقدم المرحلة</span>
                            </div>
                        </div>
                    </header>
                    
                    <div class="game-modes glass-effect" role="tablist" aria-label="أنماط اللعب">
                        <h3>
                            <i class="fas fa-gamepad"></i> اختر نمط اللعب
                        </h3>
                        <div class="mode-tabs">
                            <button class="mode-tab active" 
                                    data-mode="normal" 
                                    role="tab" 
                                    aria-selected="true"
                                    aria-controls="normal-levels">
                                <i class="fas fa-flag" aria-hidden="true"></i>
                                المستويات العادية
                            </button>
                            <button class="mode-tab" 
                                    data-mode="daily" 
                                    role="tab" 
                                    aria-selected="false"
                                    aria-controls="daily-challenges">
                                <i class="fas fa-calendar-day" aria-hidden="true"></i>
                                التحدي اليومي
                            </button>
                            <button class="mode-tab" 
                                    data-mode="timed" 
                                    role="tab" 
                                    aria-selected="false"
                                    aria-controls="timed-challenges">
                                <i class="fas fa-stopwatch" aria-hidden="true"></i>
                                الوقت المحدد
                            </button>
                            <button class="mode-tab" 
                                    data-mode="multiplayer" 
                                    role="tab" 
                                    aria-selected="false"
                                    aria-controls="multiplayer-modes">
                                <i class="fas fa-users" aria-hidden="true"></i>
                                متعدد اللاعبين
                            </button>
                        </div>
                    </div>
                    
                    <div class="levels-container" role="tabpanel" id="normal-levels">
                        <div class="levels-header">
                            <h2>المستويات العادية</h2>
                            <div class="level-filters">
                                <button class="filter-btn active" data-filter="all">الكل</button>
                                <button class="filter-btn" data-filter="completed">المكتملة</button>
                                <button class="filter-btn" data-filter="available">المتاحة</button>
                                <button class="filter-btn" data-filter="locked">المقفلة</button>
                            </div>
                        </div>
                        <div class="levels-grid" id="levels-container">
                            <!-- سيتم ملء المستويات ديناميكيًا -->
                        </div>
                    </div>
                    
                    <div class="levels-container" role="tabpanel" id="daily-challenges" hidden>
                        <h2>التحدي اليومي</h2>
                        <div class="daily-levels-grid" id="daily-levels-container">
                            <!-- سيتم ملء التحديات اليومية ديناميكيًا -->
                        </div>
                    </div>
                    
                    <div class="levels-container" role="tabpanel" id="timed-challenges" hidden>
                        <h2>التحدي المحدد بالوقت</h2>
                        <div class="timed-levels-grid" id="timed-levels-container">
                            <!-- سيتم ملء تحديات الوقت ديناميكيًا -->
                        </div>
                    </div>
                    
                    <div class="levels-container" role="tabpanel" id="multiplayer-modes" hidden>
                        <h2>متعدد اللاعبين</h2>
                        <div class="multiplayer-options">
                            <div class="multiplayer-option glass-effect">
                                <i class="fas fa-user-friends"></i>
                                <h3>العب مع صديق</h3>
                                <p>ادعُ صديقاً للعب معك</p>
                                <button class="btn">بدء اللعب</button>
                            </div>
                            <div class="multiplayer-option glass-effect">
                                <i class="fas fa-globe"></i>
                                <h3>التنافس العالمي</h3>
                                <p>تنافس مع لاعبين من حول العالم</p>
                                <button class="btn">انضم للبطولة</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn ripple" id="random-level-btn" aria-label="مستوى عشوائي">
                            <i class="fas fa-random" aria-hidden="true"></i>
                            تحدٍ عشوائي
                        </button>
                        <button class="btn ripple" id="practice-mode-btn">
                            <i class="fas fa-graduation-cap"></i>
                            وضع التدريب
                        </button>
                    </div>
                </section>
                
                <!-- شاشة اللعبة -->
                <section id="game-screen" class="screen" role="region" aria-labelledby="game-title">
                    <header class="glass-effect" role="banner">
                        <div class="header-top">
                            <button class="btn-back" id="back-from-game-btn" aria-label="العودة إلى المستويات">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <h1 id="game-title">
                                <span id="current-stage">1</span> 
                                <i class="fas fa-arrow-left" aria-hidden="true"></i>
                                المرحلة 
                                <span style="margin: 0 5px;">-</span>
                                المستوى 
                                <i class="fas fa-arrow-right" aria-hidden="true"></i>
                                <span id="current-level">1</span>
                            </h1>
                            <div class="game-mode-badge" id="game-mode-badge">
                                عادي
                            </div>
                        </div>
                        
                        <div class="game-info">
                            <div class="total-points glass-effect-light">
                                <i class="fas fa-star" aria-hidden="true"></i>
                                النقاط: <span id="level-points">0</span>/3
                            </div>
                            <div class="timer-container glass-effect-light" id="timer-container" style="display: none;"
                                 role="timer" 
                                 aria-live="polite">
                                <i class="fas fa-clock" aria-hidden="true"></i>
                                <span id="timer">60</span> ثانية
                            </div>
                            <div class="combo-counter glass-effect-light" id="combo-counter">
                                <i class="fas fa-bolt"></i>
                                <span id="combo-count">0</span> مكعب
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress" id="level-progress" style="width: 0%"
                                 role="progressbar" 
                                 aria-valuenow="0" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                                <span class="sr-only">0% من تقدم المستوى</span>
                            </div>
                        </div>
                    </header>
                    
                    <div class="game-instructions glass-effect">
                        <h3>
                            <i class="fas fa-graduation-cap"></i> كيف تلعب؟
                        </h3>
                        <ol>
                            <li>انقر على بطاقة اللغز لقلبها</li>
                            <li>انقر على بطاقة الحل المناسبة</li>
                            <li>حاول إيجاد 3 تطابقات صحيحة</li>
                            <li>استخدم التلميحات إذا واجهتك صعوبة</li>
                            <li>استمر في السلسلة لتحصل على نقاط إضافية</li>
                        </ol>
                    </div>
                    
                    <div class="game-tools">
                        <div class="tool-item" id="pause-btn">
                            <i class="fas fa-pause"></i>
                        </div>
                        <div class="tool-item" id="sound-toggle">
                            <i class="fas fa-volume-up"></i>
                        </div>
                        <div class="tool-item" id="vibration-toggle">
                            <i class="fas fa-vibrate"></i>
                        </div>
                        <div class="tool-item" id="fullscreen-toggle">
                            <i class="fas fa-expand"></i>
                        </div>
                    </div>
                    
                    <div class="hint-container glass-effect" id="hint-container" role="region" aria-label="قسم التلميحات">
                        <div class="hint-header">
                            <h3>
                                <i class="fas fa-lightbulb"></i> التلميحات
                            </h3>
                            <span class="points-badge glass-effect-light">
                                <i class="fas fa-coins"></i>
                                <span id="current-points">0</span>
                            </span>
                        </div>
                        <button class="btn hint-btn" id="hint-btn" aria-label="استخدام تلميح يكلف 10 نقاط">
                            <i class="fas fa-lightbulb" aria-hidden="true"></i>
                            تلميح (<span id="hint-cost">10</span> نقطة)
                        </button>
                        <div class="hint-buttons">
                            <button class="btn-small hint-type-btn" data-hint="reveal-one">
                                <i class="fas fa-eye"></i>
                                كشف بطاقة
                            </button>
                            <button class="btn-small hint-type-btn" data-hint="shuffle">
                                <i class="fas fa-random"></i>
                                خلط البطاقات
                            </button>
                            <button class="btn-small hint-type-btn" data-hint="extra-time">
                                <i class="fas fa-clock"></i>
                                وقت إضافي
                            </button>
                        </div>
                        <div class="hint-text glass-effect-light" id="hint-text" role="alert" aria-live="polite" hidden>
                            <!-- سيتم عرض نص التلميح هنا -->
                        </div>
                    </div>
                    
                    <div class="cards-container">
                        <section class="cards-section glass-effect" role="region" aria-labelledby="app-cards-title">
                            <h2 id="app-cards-title">
                                <i class="fas fa-robot" aria-hidden="true"></i>
                                بطاقات التحدي
                            </h2>
                            <div class="app-cards" id="app-cards" role="grid" aria-label="بطاقات الألغاز">
                                <!-- سيتم ملء بطاقات التطبيق ديناميكيًا -->
                            </div>
                        </section>
                        
                        <section class="cards-section glass-effect" role="region" aria-labelledby="player-cards-title">
                            <h2 id="player-cards-title">
                                <i class="fas fa-user" aria-hidden="true"></i>
                                بطاقات الحل
                            </h2>
                            <div class="player-cards" id="player-cards" role="grid" aria-label="بطاقات الحلول">
                                <!-- سيتم ملء بطاقات اللاعب ديناميكيًا -->
                            </div>
                        </section>
                    </div>
                    
                    <div class="action-buttons">
                        <div class="button-group">
                            <button class="btn ripple" id="restart-level-btn" aria-label="إعادة تشغيل المستوى">
                                <i class="fas fa-redo" aria-hidden="true"></i>
                                إعادة المحاولة
                            </button>
                            <button class="btn ripple" id="skip-level-btn">
                                <i class="fas fa-forward"></i>
                                تخطي المستوى
                            </button>
                        </div>
                        <button class="btn ripple btn-success" id="next-level-btn" aria-label="المستوى التالي" style="display: none;">
                            <i class="fas fa-arrow-left" aria-hidden="true"></i>
                            المستوى التالي
                        </button>
                    </div>
                </section>
                
                <!-- شاشة الإنجازات -->
                <section id="achievements-screen" class="screen" role="region" aria-labelledby="achievements-title">
                    <header class="glass-effect" role="banner">
                        <div class="header-top">
                            <button class="btn-back" id="back-from-achievements-btn">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <h1 id="achievements-title">
                                <i class="fas fa-trophy"></i>
                                الإنجازات
                            </h1>
                            <div class="achievement-count glass-effect-light">
                                <i class="fas fa-medal"></i>
                                <span id="unlocked-count">0</span>/<span id="total-achievements">50</span>
                            </div>
                        </div>
                    </header>
                    
                    <div class="achievements-container" id="achievements-container">
                        <!-- سيتم ملء الإنجازات ديناميكياً -->
                    </div>
                </section>
                
                <!-- شاشة المتجر -->
                <section id="shop-screen" class="screen" role="region" aria-labelledby="shop-title">
                    <header class="glass-effect" role="banner">
                        <div class="header-top">
                            <button class="btn-back" id="back-from-shop-btn">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <h1 id="shop-title">
                                <i class="fas fa-shopping-cart"></i>
                                المتجر
                            </h1>
                            <div class="shop-balance glass-effect-light">
                                <i class="fas fa-coins"></i>
                                <span id="shop-balance">0</span>
                            </div>
                        </div>
                    </header>
                    
                    <div class="shop-categories">
                        <button class="shop-category active" data-category="powerups">التعزيزات</button>
                        <button class="shop-category" data-category="themes">الثيمات</button>
                        <button class="shop-category" data-category="avatars">الصور الرمزية</button>
                        <button class="shop-category" data-category="cards">حزم البطاقات</button>
                    </div>
                    
                    <div class="shop-items" id="shop-items">
                        <!-- سيتم ملء العناصر ديناميكياً -->
                    </div>
                </section>
                
                <!-- شاشة لوحة المتصدرين -->
                <section id="leaderboard-screen" class="screen" role="region" aria-labelledby="leaderboard-title">
                    <header class="glass-effect" role="banner">
                        <div class="header-top">
                            <button class="btn-back" id="back-from-leaderboard-btn">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <h1 id="leaderboard-title">
                                <i class="fas fa-ranking-star"></i>
                                لوحة المتصدرين
                            </h1>
                            <div class="leaderboard-period">
                                <select id="leaderboard-period">
                                    <option value="daily">اليومي</option>
                                    <option value="weekly">الأسبوعي</option>
                                    <option value="monthly">الشهري</option>
                                    <option value="all">الكلي</option>
                                </select>
                            </div>
                        </div>
                    </header>
                    
                    <div class="leaderboard-container" id="leaderboard-container">
                        <!-- سيتم ملء اللوحة ديناميكياً -->
                    </div>
                </section>
                
                <!-- شاشة المساعدة -->
                <section id="help-screen" class="screen" role="region" aria-labelledby="help-title">
                    <header class="glass-effect" role="banner">
                        <div class="header-top">
                            <button class="btn-back" id="back-from-help-btn">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                            <h1 id="help-title">
                                <i class="fas fa-question-circle"></i>
                                المساعدة
                            </h1>
                        </div>
                    </header>
                    
                    <div class="help-content">
                        <div class="faq-section glass-effect">
                            <h3><i class="fas fa-question"></i> الأسئلة الشائعة</h3>
                            <div class="faq-item">
                                <h4>كيف يمكنني كسب المزيد من النقاط؟</h4>
                                <p>يمكنك كسب النقاط من خلال إكمال المستويات، حل الألغاز الثقافية، الفوز بالتحديات اليومية، وتحقيق الإنجازات.</p>
                            </div>
                            <div class="faq-item">
                                <h4>كيف أعرف أنني جاهز للمرحلة التالية؟</h4>
                                <p>ستفتح المرحلة التالية عندما تحصل على النقاط المطلوبة وتكمل جميع مستويات المرحلة الحالية.</p>
                            </div>
                            <div class="faq-item">
                                <h4>هل يمكنني اللعب دون اتصال بالإنترنت؟</h4>
                                <p>نعم، التطبيق يعمل بشكل كامل دون اتصال بالإنترنت باستثناء بعض الميزات مثل متعدد اللاعبين ولوحة المتصدرين.</p>
                            </div>
                        </div>
                        
                        <div class="contact-section glass-effect">
                            <h3><i class="fas fa-headset"></i> اتصل بنا</h3>
                            <div class="contact-options">
                                <a href="mailto:support@example.com" class="contact-option">
                                    <i class="fas fa-envelope"></i>
                                    <span>البريد الإلكتروني</span>
                                </a>
                                <button class="contact-option" id="whatsapp-contact">
                                    <i class="fab fa-whatsapp"></i>
                                    <span>واتساب</span>
                                </button>
                                <button class="contact-option" id="report-bug">
                                    <i class="fas fa-bug"></i>
                                    <span>الإبلاغ عن خطأ</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- شاشات أخرى سيتم تضمينها -->
                <div id="profile-screen-container"></div>
                <div id="settings-screen-container"></div>
                
                <!-- رسائل التطبيق -->
                <div class="message-overlay" id="message-overlay" aria-hidden="true">
                    <div class="message glass-effect" id="message" role="dialog" aria-labelledby="message-title">
                        <div class="message-icon">
                            <i class="fas fa-trophy" aria-hidden="true"></i>
                        </div>
                        <h3 id="message-title" class="message-title">تهانينا!</h3>
                        <p id="message-text" class="message-text">لقد أكملت المستوى بنجاح</p>
                        <div class="message-actions">
                            <button class="btn ripple" id="message-btn-ok" aria-label="موافق">
                                <i class="fas fa-check" aria-hidden="true"></i>
                                موافق
                            </button>
                            <button class="btn ripple btn-secondary" id="message-btn-cancel" aria-label="إلغاء" style="display: none;">
                                <i class="fas fa-times" aria-hidden="true"></i>
                                إلغاء
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- نافذة اللغز الثقافي -->
                <div class="cultural-puzzle-overlay" id="cultural-puzzle-overlay" role="dialog" aria-labelledby="puzzle-title" aria-hidden="true">
                    <!-- سيتم إضافة محتوى اللغز الثقافي ديناميكيًا -->
                </div>
                
                <!-- نافذة الإنجازات المنبثقة -->
                <div class="achievement-popup" id="achievement-popup" role="dialog" aria-labelledby="achievement-title" aria-hidden="true">
                    <!-- سيتم إضافة الإنجازات ديناميكيًا -->
                </div>
                
                <!-- نافذة النتيجة النهائية -->
                <div class="final-score-popup" id="final-score-popup" role="dialog" aria-labelledby="final-score-title" aria-hidden="true">
                    <!-- سيتم إضافة النتائج النهائية ديناميكيًا -->
                </div>
                
                <!-- نافذة الإيقاف المؤقت -->
                <div class="pause-overlay" id="pause-overlay" aria-hidden="true">
                    <div class="pause-menu glass-effect">
                        <h3><i class="fas fa-pause"></i> اللعبة متوقفة</h3>
                        <button class="btn" id="resume-btn">
                            <i class="fas fa-play"></i>
                            استئناف اللعب
                        </button>
                        <button class="btn" id="restart-from-pause-btn">
                            <i class="fas fa-redo"></i>
                            إعادة تشغيل المستوى
                        </button>
                        <button class="btn" id="exit-to-menu-btn">
                            <i class="fas fa-home"></i>
                            الخروج إلى القائمة
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- شريط التنقل السفلي -->
        <nav class="bottom-nav" role="navigation" aria-label="التنقل الرئيسي">
            <a href="#" class="nav-item active" data-target="stages-screen" role="tab" aria-selected="true" aria-controls="stages-screen">
                <i class="fas fa-home" aria-hidden="true"></i>
                <span>الرئيسية</span>
            </a>
            <a href="#" class="nav-item" data-target="profile-screen" role="tab" aria-selected="false" aria-controls="profile-screen">
                <i class="fas fa-user" aria-hidden="true"></i>
                <span>الملف</span>
            </a>
            <a href="#" class="nav-item" data-target="shop-screen" role="tab" aria-selected="false" aria-controls="shop-screen">
                <i class="fas fa-shopping-cart" aria-hidden="true"></i>
                <span>المتجر</span>
            </a>
            <a href="#" class="nav-item" data-target="leaderboard-screen" role="tab" aria-selected="false" aria-controls="leaderboard-screen">
                <i class="fas fa-ranking-star" aria-hidden="true"></i>
                <span>المتصدرين</span>
            </a>
            <button class="nav-item quick-play-btn" id="quick-play-btn" aria-label="لعب سريع">
                <i class="fas fa-play-circle" aria-hidden="true"></i>
                <span>لعب سريع</span>
            </button>
        </nav>
        
        <!-- إشعارات الريتش -->
        <div class="snackbar" id="snackbar"></div>
    </div>

    <!-- مكتبات JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>
    
    <!-- ملفات التطبيق -->
    <script src="sw.js"></script>
    <script src="app.js"></script>
    <script src="profile.js"></script>
    <script src="settings.js"></script>
    
    <!-- تهيئة PWA -->
    <script>
        // إنشاء ملف Manifest ديناميكيًا
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
        
        // إضافة وصف للصور
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('img').forEach(img => {
                if (!img.hasAttribute('alt')) {
                    img.setAttribute('alt', 'صورة لعبة');
                }
            });
            
            // تهيئة المتغيرات العامة
            window.vibrationEnabled = true;
            window.soundEnabled = true;
            window.notificationsEnabled = true;
            window.deferredPrompt = null;
            window.isFullscreen = false;
            window.isPaused = false;
        });
    </script>
</body>
</html>
